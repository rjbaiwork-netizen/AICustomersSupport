// Master Sync Configuration
const SHEET_ID = 'আপনার_গুগল_শিট_আইডি_এখানে'; // গুগল শিট ইউআরএল থেকে আইডি দিন
const TAB_NAME = 'Sheet1'; 
const API_URL = `https://docs.google.com/spreadsheets/d/${SHEET_ID}/gviz/tq?tqx=out:json&sheet=${TAB_NAME}`;

async function syncDashboard() {
    try {
        const response = await fetch(API_URL);
        const text = await response.text();
        const data = JSON.parse(text.substr(47).slice(0, -2));
        
        const rows = data.table.rows;
        // উদাহরণ: শিটের প্রথম রো-তে যদি কোনো স্ট্যাটাস থাকে
        const statusText = rows[0].c[0].v; 
        document.getElementById('live-status').innerText = statusText;
        
        console.log("Data Synced Successfully!");
    } catch (error) {
        console.error("Sync Error:", error);
    }
}

// Telegram Mini App Support
if (window.Telegram && window.Telegram.WebApp) {
    const tg = window.Telegram.WebApp;
    tg.expand(); // অ্যাপটি বড় আকারে ওপেন হবে
    tg.MainButton.setText("Admin Panel").show().onClick(() => {
        window.location.href = "admin.html";
    });
}

// Auto-Sync every 30 seconds
setInterval(syncDashboard, 30000);
window.onload = syncDashboard;
